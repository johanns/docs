<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>SHA3</title>

  <meta name="keywords" content="ruby,documentation,SHA3">


    <meta name="description" content="SHA3: XKCP). SHAKE256, and KMAC (Keccak Message Authentication Code) as specified in NIST SP 800-185.">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="file">
<div id="navigation-toggle" role="button" tabindex="0" aria-label="Toggle sidebar" aria-expanded="true" aria-controls="navigation">
  <span aria-hidden="true">&#9776;</span>
</div>


<nav id="navigation" role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>



  <ul class="link-list" role="directory">
              <li>
            <details open>
              <summary>      <a href="#label-SHA3+for+Ruby">SHA3 for Ruby</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-Table+of+Contents">Table of Contents</a>
          <li>      <a href="#label-Documentation">Documentation</a>
          <li>      <a href="#label-Features">Features</a>
          <li>      <a href="#label-Installation">Installation</a>
          <li>
            <details open>
              <summary>      <a href="#label-Usage">Usage</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-SHA-3+Fixed+Hash+Functions">SHA-3 Fixed Hash Functions</a>
          <li>      <a href="#label-Alternate+Class+Syntax">Alternate Class Syntax</a>
          <li>      <a href="#label-Hashing+a+File">Hashing a File</a>
          <li>      <a href="#label-SHAKE128-2F256+Functions">SHAKE128/256 Functions</a>
          <li>      <a href="#label-cSHAKE128-2F256+Functions">cSHAKE128/256 Functions</a>
          <li>      <a href="#label-KMAC+Functions">KMAC Functions</a>

              </ul>
            </details>
          </li>
          <li>
            <details open>
              <summary>      <a href="#label-Development">Development</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-Dependencies">Dependencies</a>
          <li>      <a href="#label-Testing">Testing</a>
          <li>      <a href="#label-Supported+Ruby+Versions">Supported Ruby Versions</a>

              </ul>
            </details>
          </li>
          <li>      <a href="#label-Roadmap">Roadmap</a>
          <li>      <a href="#label-Contributing">Contributing</a>
          <li>      <a href="#label-License">License</a>
          <li>      <a href="#label-Credits">Credits</a>

              </ul>
            </details>
          </li>

  </ul>
</div>

  
<div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
    <li><a href="./LICENSE_txt.html">LICENSE</a>
    <li><a href="./README_md.html">README</a>
  </ul>
</div>

  <div id="classindex-section" class="nav-section">
  <h3>Class and Module Index</h3>

  <ul class="link-list">
  <li><details open><summary><code><a href="./SHA3.html">SHA3</a></code></summary>
  <ul class="link-list">
  <li><details><summary><code><a href="./SHA3/CSHAKE.html">CSHAKE</a></code></summary>
  <ul class="link-list">
  <li><code><a href="./SHA3/CSHAKE/Error.html">Error</a></code>
  </ul></details>
  <li><details><summary><code><a href="./SHA3/Digest.html">Digest</a></code></summary>
  <ul class="link-list">
  <li><code><a href="./SHA3/Digest/Error.html">Error</a></code>
  <li><code><a href="./SHA3/Digest/SHA3_224.html">SHA3_224</a></code>
  <li><code><a href="./SHA3/Digest/SHA3_256.html">SHA3_256</a></code>
  <li><code><a href="./SHA3/Digest/SHA3_384.html">SHA3_384</a></code>
  <li><code><a href="./SHA3/Digest/SHA3_512.html">SHA3_512</a></code>
  <li><code><a href="./SHA3/Digest/SHAKE_128.html">SHAKE_128</a></code>
  <li><code><a href="./SHA3/Digest/SHAKE_256.html">SHAKE_256</a></code>
  </ul></details>
  <li><details><summary><code><a href="./SHA3/KMAC.html">KMAC</a></code></summary>
  <ul class="link-list">
  <li><code><a href="./SHA3/KMAC/Error.html">Error</a></code>
  </ul></details>
  </ul></details>
</div>


  <footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.12.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

</nav>

<main role="main">

  
<h1 id="label-SHA3+for+Ruby"><a href="SHA3.html"><code>SHA3</code></a> for Ruby<span><a href="#label-SHA3+for+Ruby">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="https://badge.fury.io/rb/sha3"><img src="https://badge.fury.io/rb/sha3.svg"></a> <a href="https://github.com/johanns/sha3/actions/workflows/main.yml"><img src="https://github.com/johanns/sha3/actions/workflows/main.yml/badge.svg"></a></p>

<p>A high-performance native binding to the <a href="SHA3.html"><code>SHA3</code></a> (FIPS 202) cryptographic hashing algorithms, based on the <a href="https://github.com/XKCP/XKCP">XKCP - eXtended Keccak Code Package</a>.</p>

<p>This gem provides support for the standard SHA-3 fixed-length functions (224, 256, 384, and 512 bits), as well as the SHAKE128/SHAKE256 extendable-output functions (XOFs), cSHAKE128/cSHAKE256, and KMAC (Keccak Message Authentication Code) as specified in NIST SP 800-185.</p>

<blockquote>
<p>[!CAUTION] <strong>Security Notice</strong>: Do not use SHA-3 for hashing passwords. Instead, use a slow hashing function such as PBKDF2, Argon2, bcrypt, or scrypt.</p>

<p>[!IMPORTANT] <strong>Breaking Changes</strong>: <a href="SHA3.html"><code>SHA3</code></a> version 2.0 introduces breaking changes in the API to support new features and functionality. Please review the changelog and ensure compatibility with your application. If you need the previous behavior, lock your Gemfile to version ‘~&gt; 1.0’.</p>
</blockquote>

<h2 id="label-Table+of+Contents">Table of Contents<span><a href="#label-Table+of+Contents">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="#documentation">Documentation</a></p>
</li><li>
<p><a href="#features">Features</a></p>
</li><li>
<p><a href="#installation">Installation</a></p>
</li><li>
<p><a href="#usage">Usage</a></p>
</li><li>
<p><a href="#sha-3-fixed-hash-functions">SHA-3 Fixed Hash Functions</a></p>
</li><li>
<p><a href="#alternate-class-syntax">Alternate Class Syntax</a></p>
</li><li>
<p><a href="#hashing-a-file">Hashing a File</a></p>
</li><li>
<p><a href="#shake128256-functions">SHAKE128/256 Functions</a></p>
</li><li>
<p><a href="#cshake128256-functions">cSHAKE128/256 Functions</a></p>
</li><li>
<p><a href="#kmac-functions">KMAC Functions</a></p>
</li><li>
<p><a href="#development">Development</a></p>
</li><li>
<p><a href="#dependencies">Dependencies</a></p>
</li><li>
<p><a href="#testing">Testing</a></p>
</li><li>
<p><a href="#supported-ruby-versions">Supported Ruby Versions</a></p>
</li><li>
<p><a href="#contributing">Contributing</a></p>
</li><li>
<p><a href="#roadmap">Roadmap</a></p>
</li><li>
<p><a href="#license">License</a></p>
</li><li>
<p><a href="#credits">Credits</a></p>
</li></ul>

<h2 id="label-Documentation">Documentation<span><a href="#label-Documentation">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="https://docs.jsg.io/sha3/html/index.html">API Documentation</a></p>
</li><li>
<p><a href="https://github.com/johanns/sha3#readme">GitHub Repository</a></p>
</li><li>
<p><a href="https://github.com/johanns/sha3/issues">Issue Tracker</a></p>
</li></ul>

<h2 id="label-Features">Features<span><a href="#label-Features">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Full support for all SHA-3 variants (224, 256, 384, and 512 bits)</p>
</li><li>
<p>Support for SHAKE128 and SHAKE256 extendable-output functions (XOFs)</p>
</li><li>
<p>Support for cSHAKE128 and cSHAKE256 extendable-output functions (XOFs) with domain separation and personalization</p>
</li><li>
<p>Support for KMAC (Keccak Message Authentication Code)</p>
</li><li>
<p>Native C implementation for high performance</p>
</li><li>
<p>Simple, Ruby-friendly API that follows Ruby’s standard Digest interface</p>
</li><li>
<p>Comprehensive test suite with official NIST test vectors</p>
</li><li>
<p>Thread-safe implementation</p>
</li></ul>

<h2 id="label-Installation">Installation<span><a href="#label-Installation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Add this line to your application’s Gemfile:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;sha3&#39;</span>, <span class="ruby-string">&#39;~&gt; 2.2&#39;</span>
</pre>

<p>And then execute:</p>

<pre class="ruby"><span class="ruby-identifier">bundle</span> <span class="ruby-identifier">install</span>
</pre>

<p>Or install it yourself as:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">sha3</span>
</pre>

<h2 id="label-Usage">Usage<span><a href="#label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-SHA-3+Fixed+Hash+Functions">SHA-3 Fixed Hash Functions<span><a href="#label-SHA-3+Fixed+Hash+Functions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sha3&#39;</span>

<span class="ruby-comment"># Create a new digest instance</span>
<span class="ruby-identifier">digest</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:sha3_224</span>, <span class="ruby-string">&#39;Start here&#39;</span>)

<span class="ruby-comment"># Add more data to be hashed</span>
<span class="ruby-identifier">digest</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;Compute Me&quot;</span>
<span class="ruby-identifier">digest</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&quot;Me too&quot;</span>)

<span class="ruby-comment"># Get the final hash value as a hex string</span>
<span class="ruby-identifier">digest</span>.<span class="ruby-identifier">hexdigest</span>
<span class="ruby-comment"># =&gt; &quot;d6d38021d60857...&quot;</span>

<span class="ruby-comment"># Or as a binary string</span>
<span class="ruby-identifier">digest</span>.<span class="ruby-identifier">digest</span>
</pre>

<p>Valid algorithm symbols are:</p>
<ul><li>
<p><code>:sha3_224</code> - SHA-3 224 bits</p>
</li><li>
<p><code>:sha3_256</code> - SHA-3 256 bits</p>
</li><li>
<p><code>:sha3_384</code> - SHA-3 384 bits</p>
</li><li>
<p><code>:sha3_512</code> - SHA-3 512 bits</p>
</li><li>
<p><code>:shake_128</code> - SHAKE128 extendable-output function</p>
</li><li>
<p><code>:shake_256</code> - SHAKE256 extendable-output function</p>
</li></ul>

<h3 id="label-Alternate+Class+Syntax">Alternate Class Syntax<span><a href="#label-Alternate+Class+Syntax">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>For convenience, you can also use dedicated classes for each algorithm:</p>

<pre class="ruby"><span class="ruby-comment"># Available classes</span>
<span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA3_224</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">data</span>])
<span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA3_256</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">data</span>])
<span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA3_384</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">data</span>])
<span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA3_512</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">data</span>])
<span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHAKE_128</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">data</span>])
<span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHAKE_256</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">data</span>])
</pre>

<pre class="ruby"><span class="ruby-comment"># Example usage</span>
<span class="ruby-identifier">digest</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA3_256</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;Start here&#39;</span>)

<span class="ruby-identifier">digest</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;Compute Me&quot;</span>
<span class="ruby-identifier">digest</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&quot;Me too&quot;</span>)

<span class="ruby-identifier">digest</span>.<span class="ruby-identifier">hexdigest</span>
<span class="ruby-comment"># =&gt; &quot;bedf0dd9a15b647...&quot;</span>
</pre>

<h3 id="label-Hashing+a+File">Hashing a File<span><a href="#label-Hashing+a+File">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-comment"># Compute the hash value for a given file, and return the result as hex</span>
<span class="ruby-identifier">hash</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA3_256</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&quot;my_file.bin&quot;</span>).<span class="ruby-identifier">hexdigest</span>

<span class="ruby-comment"># Using SHAKE function to generate an arbitrary-length hash output</span>
<span class="ruby-identifier">shake</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHAKE_128</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&quot;my_file.bin&quot;</span>).<span class="ruby-identifier">hexdigest</span>(<span class="ruby-value">320</span>)

<span class="ruby-comment"># Calling SHA3::Digest.file(...) defaults to SHA3_256</span>
<span class="ruby-identifier">hash</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&quot;my_file.bin&quot;</span>).<span class="ruby-identifier">hexdigest</span>
<span class="ruby-comment"># =&gt; &quot;a9801db49389339...&quot;</span>
</pre>

<h3 id="label-SHAKE128-2F256+Functions">SHAKE128/256 Functions<span><a href="#label-SHAKE128-2F256+Functions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>SHAKE128 and SHAKE256 are extendable-output functions (XOFs) that allow you to “squeeze” an arbitrary number of bytes from the hash state:</p>

<pre class="ruby"><span class="ruby-comment"># Create a new SHAKE128 instance</span>
<span class="ruby-identifier">shake</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHAKE_128</span>.<span class="ruby-identifier">new</span>

<span class="ruby-comment"># Add data to hash</span>
<span class="ruby-identifier">shake</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;Squeeze this data...&#39;</span>

<span class="ruby-comment"># Squeeze 120 bytes (240 hex characters) from the hash state</span>
<span class="ruby-identifier">result</span> = <span class="ruby-identifier">shake</span>.<span class="ruby-identifier">hex_squeeze</span>(<span class="ruby-value">120</span>)

<span class="ruby-comment"># Or get binary output</span>
<span class="ruby-identifier">binary_result</span> = <span class="ruby-identifier">shake</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value">1024</span>)

<span class="ruby-comment"># You can call squeeze functions multiple times with arbitrary output lengths</span>
<span class="ruby-identifier">first_part</span> = <span class="ruby-identifier">shake</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value">32</span>)       <span class="ruby-comment"># Get 32 bytes</span>
<span class="ruby-identifier">second_part</span> = <span class="ruby-identifier">shake</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value">64</span>)      <span class="ruby-comment"># Get 64 bytes</span>
<span class="ruby-identifier">third_part</span> = <span class="ruby-identifier">shake</span>.<span class="ruby-identifier">hex_squeeze</span>(<span class="ruby-value">128</span>)  <span class="ruby-comment"># Get 128 bytes as hex</span>
</pre>

<h3 id="label-cSHAKE128-2F256+Functions">cSHAKE128/256 Functions<span><a href="#label-cSHAKE128-2F256+Functions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>cSHAKE128 and cSHAKE256 are customizable versions of SHAKE128 and SHAKE256, allowing for domain separation and personalization through a customization string.</p>

<pre class="ruby"><span class="ruby-comment"># Create a new cSHAKE instance with a fixed output length</span>
<span class="ruby-identifier">cshake</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">CSHAKE</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:cshake_128</span>, <span class="ruby-value">32</span>, <span class="ruby-value">name:</span> <span class="ruby-string">&#39;my-app&#39;</span>, <span class="ruby-value">customization:</span> <span class="ruby-string">&#39;Email Signature&#39;</span>)

<span class="ruby-comment"># Add data to hash</span>
<span class="ruby-identifier">cshake</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&#39;Hello&#39;</span>)
<span class="ruby-comment"># Or use the &lt;&lt; operator</span>
<span class="ruby-identifier">cshake</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;Compute me...&#39;</span>

<span class="ruby-comment"># Get the final hash value as a hex string</span>
<span class="ruby-identifier">cshake</span>.<span class="ruby-identifier">hexdigest</span>
<span class="ruby-comment"># =&gt; &quot;d6d38021d60857...&quot;</span>

<span class="ruby-comment"># Or as a binary string</span>
<span class="ruby-identifier">cshake</span>.<span class="ruby-identifier">digest</span>

<span class="ruby-comment"># Create a new cSHAKE instance for an arbitrarily-long (XOF) operation</span>
<span class="ruby-identifier">cshake</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">CSHAKE</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:cshake_256</span>, <span class="ruby-value">0</span>, <span class="ruby-value">customization:</span> <span class="ruby-string">&#39;Signature&#39;</span>)

<span class="ruby-comment"># Add data to hash</span>
<span class="ruby-identifier">cshake</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&#39;Beep Beep&#39;</span>)

<span class="ruby-comment"># Squeeze 64-bytes of data from state</span>
<span class="ruby-identifier">cshake</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value">64</span>)
</pre>

<h3 id="label-KMAC+Functions">KMAC Functions<span><a href="#label-KMAC+Functions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>KMAC (Keccak Message Authentication Code) is a message authentication code algorithm based on the SHAKE extendable-output functions:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sha3&#39;</span>

<span class="ruby-comment"># Create a new KMAC instance with a fixed output length</span>
<span class="ruby-comment"># Parameters: algorithm, output_length (in bytes), key, [customization] optional</span>
<span class="ruby-identifier">kmac</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">KMAC</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:kmac_128</span>, <span class="ruby-value">32</span>, <span class="ruby-string">&quot;my secret key&quot;</span>, <span class="ruby-string">&quot;app-specific customization&quot;</span>)

<span class="ruby-comment"># Add data to be authenticated (update can be called multiple times)</span>
<span class="ruby-identifier">kmac</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&quot;Authenticate this message&quot;</span>)
<span class="ruby-comment"># or use the &lt;&lt; operator</span>
<span class="ruby-identifier">kmac</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;And this too&quot;</span>

<span class="ruby-comment"># Get the result as a hex string</span>
<span class="ruby-identifier">result</span> = <span class="ruby-identifier">kmac</span>.<span class="ruby-identifier">hexdigest</span>
<span class="ruby-comment"># =&gt; &quot;a8982c...&quot;</span>

<span class="ruby-comment"># Or as binary</span>
<span class="ruby-identifier">binary_result</span> = <span class="ruby-identifier">kmac</span>.<span class="ruby-identifier">digest</span>

<span class="ruby-comment"># Create a new KMAC instance with an arbitrary-length (XOF) operation</span>
<span class="ruby-identifier">kmac</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">KMAC</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:kmac_256</span>, <span class="ruby-value">0</span>, <span class="ruby-string">&quot;my secret key&quot;</span>, <span class="ruby-string">&quot;app-specific customization&quot;</span>)

<span class="ruby-comment"># Add data to be authenticated (update can be called multiple times)</span>
<span class="ruby-identifier">kmac</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&quot;Authenticate this message&quot;</span>)
<span class="ruby-comment"># or use the &lt;&lt; operator</span>
<span class="ruby-identifier">kmac</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;And this too&quot;</span>

<span class="ruby-comment"># Get the result as a hex string</span>
<span class="ruby-identifier">result</span> = <span class="ruby-identifier">kmac</span>.<span class="ruby-identifier">hex_squeeze</span>(<span class="ruby-value">128</span>)

<span class="ruby-comment"># Or as binary</span>
<span class="ruby-identifier">binary_result</span> = <span class="ruby-identifier">kmac</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value">128</span>)

<span class="ruby-comment"># One-shot operation (customization is optional)</span>
<span class="ruby-comment"># Parameters: algorithm, data, data, output_length (in bytes),key, [customization] optional</span>
<span class="ruby-identifier">result</span> = <span class="ruby-constant">SHA3</span><span class="ruby-operator">::</span><span class="ruby-constant">KMAC</span>.<span class="ruby-identifier">hexdigest</span>(<span class="ruby-value">:kmac_256</span>, <span class="ruby-string">&quot;message&quot;</span>, <span class="ruby-value">64</span>, <span class="ruby-string">&quot;key&quot;</span>, <span class="ruby-string">&quot;customization&quot;</span>)
</pre>

<h2 id="label-Development">Development<span><a href="#label-Development">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-Dependencies">Dependencies<span><a href="#label-Dependencies">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><strong>C/C++</strong> compiler and native build tools (e.g., Clang/LLVM, GCC, MinGW, etc.)</p>
</li><li>
<p><strong>Gems</strong>: rake, rake-compiler, rspec, yard</p>
</li></ul>

<h3 id="label-Testing">Testing<span><a href="#label-Testing">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Run <code>rake</code> to build and run the (RSpec) tests.</p>

<p>To run the tests manually:</p>

<pre class="ruby"><span class="ruby-identifier">bundle</span> <span class="ruby-identifier">exec</span> <span class="ruby-identifier">rspec</span>
</pre>

<p>The test suite includes a special <code>sha3_vectors_spec.rb</code> file that automatically: 1. Downloads the official <a href="SHA3.html"><code>SHA3</code></a> test vectors from the XKCP repository 2. Parses the test vectors 3. Runs tests against all <a href="SHA3.html"><code>SHA3</code></a> variants (224, 256, 384, and 512 bit)</p>

<p>The test vectors are downloaded only once and cached in the <code>spec/data</code> directory for future test runs.</p>

<h3 id="label-Supported+Ruby+Versions">Supported Ruby Versions<span><a href="#label-Supported+Ruby+Versions">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>MRI Ruby 2.7 - 3.4</p>
</li></ul>

<h2 id="label-Roadmap">Roadmap<span><a href="#label-Roadmap">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>As of version 2.2.0 (2025), this gem is feature complete with a stable API—future updates will focus exclusively on performance improvements, security enhancements, and bug fixes.</p>
<ul><li>
<p>[X] 0.1.0: Add support for SHA-3 variants (224, 256, 384, and 512 bit)</p>
</li><li>
<p>[X] 2.0.0: Add support for SHAKE128 and SHAKE256 extendable-output functions (XOFs)</p>
</li><li>
<p>[X] 2.1.0: Add support for KMAC</p>
</li><li>
<p>[X] 2.2.0: Add support for cSHAKE</p>
</li></ul>

<h2 id="label-Contributing">Contributing<span><a href="#label-Contributing">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ol><li>
<p>Fork it</p>
</li><li>
<p>Create your feature branch (<code>git checkout -b my-new-feature</code>)</p>
</li><li>
<p>Commit your changes (<code>git commit -am &#39;Add some feature&#39;</code>)</p>
</li><li>
<p>Push to the branch (<code>git push origin my-new-feature</code>)</p>
</li><li>
<p>Create new Pull Request</p>
</li></ol>

<h2 id="label-License">License<span><a href="#label-License">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Copyright © 2012 - 2025 Johanns Gregorian (<a href="https://github.com/johanns">github.com/johanns</a>)</p>

<p>Released under the MIT License. See <a href="LICENSE.txt">LICENSE.txt</a> for details.</p>

<h2 id="label-Credits">Credits<span><a href="#label-Credits">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="https://github.com/XKCP/XKCP">XKCP - eXtended Keccak Code Package</a> by the Keccak team: <a href="https://keccak.team/index.html">keccak.team/index.html</a></p>
</li><li>
<p>All contributors to the <a href="SHA3.html"><code>SHA3</code></a> for Ruby project</p>
</li></ul>

</main>

